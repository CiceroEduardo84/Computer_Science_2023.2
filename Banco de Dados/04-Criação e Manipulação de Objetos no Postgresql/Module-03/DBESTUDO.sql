--Comando para criar tabela CURSO;
CREATE TABLE CURSO (
	CODIGOCURSO int NOT NULL,
	NOME varchar(90) NOT NULL,
	DATACRIACAO date NULL,
	CONSTRAINT CURSO_pk PRIMARY KEY (CODIGOCURSO)
);

--Comando para criar tabela DISCIPLINA;
CREATE TABLE DISCIPLINA (
	CODIGODISCIPLINA int NOT NULL,
	NOME varchar(90) NOT NULL,
	CARGAHORARIA int NOT NULL,
	CONSTRAINT DISCIPLINA_pk PRIMARY KEY (CODIGODISCIPLINA)
);

--Comando para criar CURSODISCIPLINA;
CREATE TABLE CURSODISCIPLINA (
	CODIGOCURSO int NOT NULL,
	CODIGODISCIPLINA int NOT NULL,
	CONSTRAINT CURSODISCIPLINA_pk PRIMARY KEY (CODIGOCURSO,CODIGODISCIPLINA),
	CONSTRAINT CURSODISCIPLINA_CURSO FOREIGN KEY (CODIGOCURSO) REFERENCES CURSO(CODIGOCURSO) ON DELETE CASCADE,
	CONSTRAINT CURSODISPLINA_DISCIPLINA FOREIGN KEY (CODIGODISCIPLINA) REFERENCES DISCIPLINA (CODIGODISCIPLINA)
);

--Comando para INSERÇÃO dos valores na tabela curso;
INSERT INTO CURSO (CODIGOCURSO,NOME,DATACRIACAO)
VALUES( 1,'Sistemas de Informação','19/06/1999');

INSERT INTO CURSO (CODIGOCURSO,NOME,DATACRIACAO)
VALUES( 2,'Medicina','10/05/1990');

INSERT INTO CURSO (CODIGOCURSO,NOME,DATACRIACAO)
VALUES( 3,'Nutrição','19/02/2012');

INSERT INTO CURSO (CODIGOCURSO,NOME,DATACRIACAO)
VALUES( 4,'Pedagogia','19/06/1999');

--Comando para INSERÇÃO dos valores na tabela Disciplina;
INSERT INTO DISCIPLINA (CODIGODISCIPLINA,NOME,CARGAHORARIA)
VALUES( 1,'Leitura e Produção de Textos',60);

INSERT INTO DISCIPLINA (CODIGODISCIPLINA,NOME,CARGAHORARIA)
VALUES( 2,'Redes de Computadores',60);

INSERT INTO DISCIPLINA (CODIGODISCIPLINA,NOME,CARGAHORARIA)
VALUES( 3,'Computação Gráfica',40);

INSERT INTO DISCIPLINA (CODIGODISCIPLINA,NOME,CARGAHORARIA)
VALUES( 4,'Anatomia',60);

--Comando para INSERÇÃO dos valores na tabela Disciplina;
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (1,1);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (1,2);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (1,3);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (2,1);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (2,3);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (3,1);
INSERT INTO CURSODISCIPLINA(CODIGOCURSO,CODIGODISCIPLINA) VALUES (3,3);

--Comando para Selecionar valores
SELECT * FROM Curso,disciplina,CURSODISCIPLINA 
	WHERE CURSO.CODIGOCURSO=CURSODISCIPLINA.CODIGOCURSO 
		AND DISCIPLINA.CODIGODISCIPLINA = CURSODISCIPLINA.CODIGODISCIPLINA 
			AND CURSO.CODIGOCURSO=1;

SELECT * FROM DISCIPLINA;
SELECT * FROM CURSODISCIPLINA;
SELECT * FROM CURSO;

--Comando para Update;
UPDATE DISCIPLINA SET CARGAHORARIA=70 WHERE CODIGODISCIPLINA=2;
UPDATE DISCIPLINA SET CARGAHORARIA=CARGAHORARIA*1.2;
UPDATE CURSO SET CODIGOCURSO=6 WHERE CODIGOCURSO=4;		 
UPDATE CURSO SET CODIGOCURSO=10 WHERE CODIGOCURSO=1;

--Comando para alterar tabela;
ALTER TABLE CURSODISCIPLINA
DROP CONSTRAINT CURSODISCIPLINA_CURSO,
ADD CONSTRAINT CURSODISCIPLINA_CURSO
FOREIGN KEY (CODIGOCURSO) REFERENCES CURSO (CODIGOCURSO)
ON UPDATE CASCADE;

ALTER TABLE CURSODISCIPLINA
DROP CONSTRAINT CURSODISPLINA_DISCIPLINA,
ADD CONSTRAINT CURSODISPLINA_DISCIPLINA
FOREIGN KEY (CODIGODISCIPLINA) REFERENCES DISCIPLINA (CODIGODISCIPLINA)
ON DELETE CASCADE ;

--Comando para DELETAR linhas das tabelas;
DELETE FROM DISCIPLINA WHERE CODIGODISCIPLINA=4;
DELETE FROM DISCIPLINA WHERE CODIGODISCIPLINA=1;

--Comandos para deletar todas as linhas das tabelas;
DELETE FROM CURSODISCIPLINA;
DELETE FROM CURSO;
DELETE FROM DISCIPLINA;

--Comando para Commitar(Salvar permanentemente) os dados;
COMMIT